{% extends "baseAdmin.html.twig" %}




{% block body %}

      <div class="main-panel">
        <div class="content-wrapper">
          <div class="card mb-3">
          <div class="card-body col-lg-12">
            <form action="{{ path('app_commandes_by_bank', {'id': Id}) }}" method="get" class="form-inline">
              
              <div class="form-group col-mx-8">
                <h5 class="mt-2"><strong>Filter by : </strong></h5>
              </div>
              
              <div class="form-group col-lg-6">
                <select name="etat" class="form-control col-lg-12">
                  <option value="">Tous</option>
                  <option value="livrenonpaye">Livré non payé</option>
                  <option value="livrepaye">Livré Payé</option>
                  <option value="nonlivre">Pas livré</option>
                </select>
              </div>
              

              <button type="submit" class="btn btn-primary ">Filtrer</button>
            </form>
          </div>
        </div>



          {# <form method="get">
					<label>État:</label>
					<select name="etat">
						<option value="">Tous</option>
						<option value="Pending">Pending</option>
						<option value="Progress">Progress</option>
						<option value="Completed">Completed</option>
					</select>
					<label>Prix:</label>
					<select name="prixOrder">
						<option value="">Aucun</option>
						<option value="ASC">Prix croissant</option>
						<option value="DESC">Prix décroissant</option>
					</select>
					<input type="submit" value="Filtrer">
				</form> #}


          <div class="row">
            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
              {% for message in app.flashes('success') %}
                <div class="alert alert-success">
                  {{ message }}
                </div>
             {% endfor %}
                <div class="card-body">
                  <h4 class="card-title">list of commands</h4>
                  {# <p class="card-description">
                    Add class <code>.table-striped</code>
                  </p> #}
                  <div class="table-responsive">
                  <table class="table table-striped">
								<thead>
									<tr>
										<th>
											Réference
										</th>
										<th>
											Description
										</th>
										<th>
											Materiel
										</th>
										<th>
											PU
										</th>
										<th>
											Nom du banque
										</th>
										<th>
											Taux tva
										</th>
										<th>
											AVANCE
										</th>
										<th>
											Date
										</th>
										<th>
											Etat
										</th>
									</tr>
								</thead>
								<tbody>
									{% for item in commandes %}
										<tr class="{% if item.etat == 'nonlivre' %}table-danger{% elseif item.etat == 'livrepaye' %}table-primary{% elseif item.etat == 'livrenonpaye' %}table-info{% endif %}">
											<td class="py-1">
												{{ item.ref }}
											</td>
											<td class="py-1">
												{{ item.description }}
											</td>
											<td>
												{% for commande_materiel in item.commandemateriels %}
													{{ commande_materiel.materiel.nom }}
													({{ commande_materiel.quantite }})
													<br>
												{% endfor %}
											</td>
											<td>
												{% for commande_materiel in item.commandemateriels %}
													{{ commande_materiel.materiel.pu }}
													<br>
												{% endfor %}
											</td>
											<td>
												{{ item.banque.nom }}
											</td>
											<td>
												{{ item.tauxtva * 100 }}
												%
											</td>
											<td>
												{{item.avance}}
											</td>
											<td>
												{{item.date | date('d-m-Y')}}
											</td>
											<td>
												{% if item.etat == NULL %}
													<h6 class="text-info">In progress...</h6>
												{% elseif item.etat == 'nonlivre' %}
													<span class="" style="font-size:20px;"><strong>Non livré</strong></span> 
                          {% elseif item.etat == 'livrepaye' %}
													<span class="" style="font-size:20px;"><strong>Livré et payé</strong></span>
                          {% elseif item.etat == 'livrenonpaye' %}
													<span class="" style="font-size:20px;"><strong>Livré non payé</strong></span>
												{% endif %}
											</td>
											<td>
												<a href="{{path('app_show_commande', {'id': item.id})}}" class="btn btn-info btn-sm">Show</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Ajouter nouveau commande</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
            {# {{ form_start(commandForm) }}
              {{ form_row(commandForm.descr, {'attr': {'class': 'form-control'}}) }}
              {{ form_row(commandForm.materiels, {'attr': {'class': 'form-control'}}) }}
              {{ form_row(commandForm.quantite, {'attr': {'class': 'form-control'}}) }}
              {{ form_row(commandForm.banques, {'attr': {'class': 'form-control'}}) }}
              {{ form_row(commandForm.tauxtva, {'attr': {'class': 'form-control'}}) }}
              {{ form_row(commandForm.Add) }}
            {{ form_end(commandForm) }}  #}
            </div>
            {# <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save changes</button>
            </div> #}
          </div>
        </div>
      </div>


{% endblock %}