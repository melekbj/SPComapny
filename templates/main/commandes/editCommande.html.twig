{% extends "baseAdmin.html.twig" %}



{% block body %}

<div class="main-panel">
	<div class="content-wrapper">
		<div class="row">
			<div class="col-12 grid-margin stretch-card">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title">Edit a material</h4>
						<!-- Removed commented-out code -->

						<form method="POST">
							<div class="form-group">
								<label for="ref">Réference:</label>
								<input type="text" id="ref" name="ref" value="{{ commande.ref }}" required unique class="form-control">
							</div>
							<div class="form-group">
								<label for="description">Description:</label>
								<input type="text" id="description" name="description" value="{{ commande.description }}" required class="form-control">
							</div>
							<div class="form-group">
								<label for="tauxtva">Taux TVA:</label>
								<input type="number" id="tauxtva" name="tauxtva" value="{{ commande.tauxTVA }}" required class="form-control">
							</div>
							<div class="form-group">
								<label for="avance">Avance:</label>
								<input type="number" id="avance" name="avance" value="{{ commande.avance }}" required class="form-control">
							</div>
							<div class="form-group">
								<label for="date">Date:</label>
								<input type="date" id="date" name="date" value="{{ commande.date|date('Y-m-d') }}" required class="form-control">
							</div>
							<div class="form-group">
								<label for="date">Prix vente</label>
								<input type="date" id="date" name="date" value="{{ commande.date|date('Y-m-d') }}" required class="form-control">
							</div>
							<div class="form-group">
								<label for="banque">Banque:</label>
								<select id="banque" name="banque" required class="form-control">
									{% for banque in banques %}
										<option value="{{ banque.id }}" {% if commande.banque and banque.id == commande.banque.id %} selected {% endif %}>{{ banque.nom }}</option>
									{% endfor %}
								</select>
							</div>
							<div class="ml-4 form-group">
								<label for="materiel">Matériels</label>
								{% for materiel in materiels %}
									<div class="form-check">
										<input class="form-check-input" type="checkbox" id="materiel{{ materiel.id }}" name="materiel[]" value="{{ materiel.id }}" {% if commande.hasMateriel(materiel) %} checked {% endif %}>
										<label class="form-check-label" for="materiel{{ materiel.id }}">{{ materiel.nom }}</label>
									</div>
									<div class="text-area-container {% if commande.hasMateriel(materiel) %} show {% else %} show {% endif %}">
										<label for="textarea{{ materiel.id }}">Quantité</label>
										<textarea class="form-control col-2" id="textarea{{ materiel.id }}" name="textarea{{ materiel.id }}">{{ commande.getMaterielQuantity(materiel) }}</textarea>
									</div>
								{% endfor %}
							</div>

							<button type="submit" class="btn btn-primary">Update Commande</button>
						</form>

						<script>
							$(document).ready(function () {
$('input[type="checkbox"]').change(function () {
var checkboxId = $(this).attr('id');
var textareaId = checkboxId.replace('materiel', 'textarea');
var textAreaContainer = $('#' + textareaId).closest('.text-area-container');
if ($(this).is(':checked')) {
textAreaContainer.show();
} else {
textAreaContainer.hide();
}
});
});
						</script>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- content-wrapper ends -->
</div>










{% endblock %}