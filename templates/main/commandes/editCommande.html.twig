{% extends "baseAdmin.html.twig" %}



{% block body %}

<style>
  /* Add inline-block display for the inputs and button inside "horizontal-container" */
  .horizontal-container input {
    display: inline-block;
    
    /* Optional: Adjust other styles for spacing and alignment */
    /* For example: */
     margin-top: 5px;
     margin-right: 16px;
    /* vertical-align: middle; // Align elements vertically */
  }
  .horizontal-container button {

    display: inline-block;
    


  }
  /* Make sure to hide the contents of the div when it's set to display: none */
  .horizontal-container[style*="display: none"] {
    display: none;
  }
</style>





<div class="main-panel">
	<div class="content-wrapper">
		<div class="row">
			<div class="col-12 grid-margin stretch-card">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-center text-success">Mettre à jour la commande</h4>
						<!-- Removed commented-out code -->

						<form method="POST">

							<div class="row mt-4">
								<div class="col-lg-6">
									<label class="font-italic font-weight-bold" class="font-italic font-weight-bold" for="ref">N° de commande:</label>
									<input type="text" id="ref" name="ref" value="{{ commande.ref }}" required unique class="form-control">
								</div>
								<div class="col-lg-6">
									<label class="font-italic font-weight-bold" for="description">Description:</label>
									<input type="text" id="description" name="description" value="{{ commande.description }}" required class="form-control">
								</div>
							</div>

							<div class="row mt-4">
								<div class="col-lg-6">
									<label class="font-italic font-weight-bold" for="banque">Banque:</label>
									<select id="banque" name="banque" required class="form-control">
										{% for banque in banques %}
											<option value="{{ banque.id }}" {% if commande.banque and banque.id == commande.banque.id %} selected {% endif %}>{{ banque.nom }}</option>
										{% endfor %}
									</select>
								</div>
								<div class="col-lg-6">
									<label class="font-italic font-weight-bold" for="date">Date:</label>
									<input type="date" id="date" name="date" value="{{ commande.date|date('Y-m-d') }}" required class="form-control">
								</div>
							</div>

							<div class="row mt-4">
								<div class="col-lg-4">
									<label class="font-italic font-weight-bold" for="tauxtva">Taux TVA:</label>
									<input type="number" id="tauxtva" name="tauxtva" value="{{ commande.tauxTVA }}" required class="form-control">
								</div>
								<div class="col-lg-4">
									<label class="font-italic font-weight-bold" for="devise">Devise</label>
									<select name="devise" id="devise" class="form-control">
										<option value="">Choisir devise</option>
										{% for devise in devises %}
											<option value="{{ devise }}" {% if devise == commande.devise %}selected{% endif %}>{{ devise }}</option>
										{% endfor %}
									</select>
								</div>
								<div class="col-lg-4">
									<label class="font-italic font-weight-bold" for="avance">Avance:</label>
									<input type="number" id="avance" name="avance" value="{{ commande.avance }}" required class="form-control">
								</div>
							</div>
							
							<div class="row mt-4">
								<div id="materialContainers" class="col-md-12">
									<div class="row material-containers">
										{% for commandMaterial in commandeMaterials %}
											<div class="col-md-12 material-container">
												<div class="row">
													<div class="col-md-4">
														<!-- Display the selected material -->
														<select class="form-control materialSelect mt-1" name="materialSelect[]" required>
															<option value="">Choisir matériel</option>
															{% for materiel in materiels %}
																<option value="{{ materiel.id }}" {% if materiel.id == commandMaterial.getMateriel().getId() %} selected {% endif %}>
																	{{ materiel.nom }}
																</option>
															{% endfor %}
														</select>
													</div>
													<div class="horizontal-container">
													<input type="number" class="col-md-4 form-control quantity" name="quantite[]" placeholder="Quantité" pattern="[0-9]+" title="Veuillez saisir un numéro valide" value="{{ commandMaterial.getQuantite()  }}" required/>
													<input class="col-md-4 form-control price" type="text" name="price[]" pattern="\d+(\.\d+)?" title="Veuillez saisir un numéro valide" value="{{ commandMaterial.getPrixV() }}" required/>
													</div>
												</div>
											</div>
										{% endfor %}
									</div>
								</div>
							</div>

							<button type="submit" class="btn btn-primary mt-3">Update Commande</button>
						</form>

						
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- content-wrapper ends -->
</div>















{% endblock %}